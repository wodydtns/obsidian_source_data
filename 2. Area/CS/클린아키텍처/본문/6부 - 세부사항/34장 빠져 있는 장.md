# 계층 기반 패키지
- 전통적인 수평 계층형 아키텍처
	- 프레젠테이션 도메인 데이터 계층화에서 처음 시작하기에는 계층형 아키텍처가 적합
	- 엄청난 복잡함을 겪지 않고도 무언가를 작동시켜 주는 아주 빠른 방법
	- 소프트웨어가 커지고 복잡해지기 시작하면, 더 잘게 모듈화해야 할지 고민하게 될 것
![[Drawing 2025-03-23 15.15.06.excalidraw]]
- OrderController
	- 웹 컨트롤러
	- 웹 기반 요청을 처리
	- Spring MVC 컨트롤러 등이 여기 해당
- OrderService
	- 업무 규칙을 정의하는 인터페이스
- OrdersServiceImpl
	- OrderService의 구현체
- OrdersRepository
	- 영구 저장된 데이터에 접근하는 방법을 정의하는 인터페이스
- JdbcOrdersRepository
	- OrdersRepository 인터페이스의 구현체

# 기능 기반 패키지
>![[Drawing 2025-03-23 15.25.52.excalidraw]]
- 서로 연관된 기능, 도메인 개념, Aggregate Root에 기반해 수직의 얇은 조각으로 코드를 나누는 방식
- 인터페이스, 클래스 모두 하나의 패키지에 포함된다

# 포트와 어댑터
- 포트와 어댑터 혹은 육각형 아키텍처
	- 업무/도메인에 초점을 둔 코드가 프레임워크나 데이터베이스 같은 기술적 세부 구현과 독립적이며 분리된 아키텍처를 만들기 위함
	- 내부(도메인)와 외부(인프라)로 구성
- 내부는 도메인 개념을 모두 포함
- 외부는 외부 세계(UI, 데이터베이스, 서드파티 포함)
- 주요 규칙은 외부가 내부에 의존하고, 반대로는 불가능

# 컴포넌트 기반 패키지
- 큰 단위의 단일 컴포넌트와 관련된 모든 책임을 하나의 자바 패키지로 묶는 데 주안점을 둔다
- 서비스 중심적인 시각으로 소프트웨어 시스템을 바라보며, 마이크로서비스 아키텍처가 가진 시각과 동일
- 'C4 소프트웨어 아키텍처 모델'
	- 소프트웨어 시스템의 정적 구조를 컨테이너, 컴포넌트, 클래스(또는)의 측면에서 계층적으로 생각하는 방법
	- 이 방법론에서 소프트웨어 시스템은 하나 이상의 컨테이너(예. 웹 애플리케이션, 모바일 앱, 독립형 애플리케이션, 데이터베이스, 파일 시스템 등)
	- 각 컴포넌트는 하나 이상의 클래스로 구현
	- 각 컴포넌트는 개발 jar 파일로 분리될 지 여부는 직교적인 관심사

# 구현 세부사항엔 항상 문제가 있다
- 모든 타입에서 public 지시자를 사용한다는 건 사용하는 프로그래밍 언어가 제공하는 캡슐화 관련 이점을 활용하지 않겠다는 의미

# 조직화 vs 캡슐화
- 만약 자바 애플리케이션에서 모든 타입을 public으로 지정한다면, 패키지는 단순히 조직화를 위한 매커니즘으로 전락해 캡슐화를 위한 메커니즘이 될 수 없다
- 자바의 접근 지시자가 완벽하지는 않지만, 무시하면 사서 고생하는 길이다

# 다른 결합 분리 모드
- 프로그래밍 언어가 제공하는 방법 외에도 소스 코드 의존성을 분리하는 방법
	- OSGi 같은 모듈 프레임워크
	- 자바 9에서 제공하는 모듈 시스템
	- 소스 코드 수준에서 의존성을 분리하는 방법

# 결론 : 빠져 있는 조언
- 최적의 설계를 꾀하더라도, 구현 전략에 얽힌 복잡함을 고려하지 않으면 설계가 순식간에 망가질 수도 있다
- 설계를 어떻게 해야만 원하는 코드 구조로 매핑할 수 있을지, 그 코드를 어떻게 조직화할지, 런타임과 컴파일타임에 어떤 결합 분리 모드를 적용할지를 고민하라
- 가능하다면 선택사항을 열어두되, 실용적으로 행하라
- 선택한 아키텍처 스타일을 강제하는 데 컴파일러의 도움을 받을 수 있을지를 고민하며, 데이터 모델과 같은 다른 영역에 결합되지 않도록 주의하라




