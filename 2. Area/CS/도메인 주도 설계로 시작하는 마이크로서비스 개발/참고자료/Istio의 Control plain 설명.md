Google의 Istio는 대규모로 마이크로서비스를 제어, 보안 및 관찰할 수 있는 오픈 소스 서비스 메시를 제공합니다. Istio의 아키텍처를 이해하려면 서비스 메시를 관리하는 데 특정 역할을 하는 여러 구성 요소를 자세히 살펴볼 필요가 있습니다.

여기에는 Pilot, Mixer, Galley 및 sidecar injector 를 포함한 Istio의 control plain 구성 요소에 대한 설명이 포함됩니다.
### **1. Pilot**
Pilot은 서비스 발견을 담당하며 Istio 서비스 메시의 Envoy 사이드카 프록시를 구성합니다. 주요 기능은 다음과 같습니다:

- **서비스 발견**: Pilot은 메시 구성을 해석하고 이를 Envoy에게 번역하여 메시 내의 서비스를 찾을 수 있도록 도와줍니다.
- **트래픽 관리**: 트래픽을 라우팅하고 정책을 적용하며 사용자가 정의한 트래픽 관리 규칙을 적용하도록 프록시를 관리하고 구성합니다.
- **탄력성**: 서비스 간 통신의 견고함을 보장하기 위해 재시도, 장애 조치(failovers), 및 서킷 브레이커를 구현합니다.

Pilot은 Istio가 다양한 라우팅 규칙을 작동시키고 메시의 다양한 서비스 간에 트래픽을 라우팅하는 방법을 조정하며, 이는 A/B 테스트, 카나리 릴리스 등에 도움이 됩니다.
### **2. Mixer**
Mixer는 액세스 제어와 정책을 적용하고 서비스 간 상호 작용 시 텔레메트리 데이터를 수집하는 Istio 제어 평면의 중요한 구성 요소입니다. 주요 측면은 다음과 같습니다:

- **정책 및 텔레메트리**: Mixer는 조직의 액세스 제어 정책을 적용하고 서비스 간 상호 작용마다 텔레메트리 데이터를 수집합니다.
- **어댑터**: 기능의 백엔드 플랫폼에서 추상화를 제공하여 정책 적용 및 텔레메트리 수집을 플랫폼 독립적으로 할 수 있습니다.

Mixer는 이제 중앙 처리에 의한 지연 시간과 자원 소모를 줄이기 위해 프록시 사이드카로 이 기능을 이전하는 새로운 아키텍처를 선호하여 사용 중단되었습니다.

### **3. Galley**
Galley는 Istio의 구성 검증, 수집, 처리 및 배포 구성 요소로서, 사용자가 제공한 구성이 구문적 및 의미적으로 정확한지 확인한 다음 나머지 Istio 인프라, 포함하여 Mixer와 Pilot에 전달합니다. 책임은 다음과 같습니다:

- **검증**: 구성의 정확성을 검사하고 서비스 메시를 불안정하게 할 수 있는 유효하지 않은 구성을 방지합니다.
- **배포**: 검증된 구성은 관련 Istio 구성 요소에게 추가 조치를 위해 배포됩니다.
### **4. 사이드카 인젝터**
사이드카 인젝터는 Envoy 프록시 인스턴스의 배치를 자동화하는 Istio 인프라의 중요한 부분입니다. Kubernetes에서 파드가 시작될 때, 사이드카 인젝터는 선언적 구성 규칙에 따라 자동적으로 파드 내에 Envoy 사이드카 프록시를 삽입합니다. 주요 기능은 다음과 같습니다:

- **자동 프록시 주입**: 사이드카 프록시에 필요한 구성을 자동으로 추가함으로써 Istio 서비스 메시에서 애플리케이션의 배포를 간소화합니다.
- **구성 관리**: 프록시가 서비스 메시에서 정의된 최신 규칙에 따라 구성되도록 보장합니다.

이 자동화는 특히 Kubernetes와 같은 동적 환경에서 대규모 서비스 세트의 일관성과 배포 용이성을 유지하는 데 필수적입니다.