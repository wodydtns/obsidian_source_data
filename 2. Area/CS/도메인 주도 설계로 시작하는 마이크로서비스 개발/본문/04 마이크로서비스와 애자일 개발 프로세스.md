애자일의 설계
    - 애자일도 설계는 **필수적이다**
    - 단순한 설계를 통해 최소한의 실제로 동작하는 제품인 MVP(mininum Viable Product)를 만들어 자주 배포하는 것이 중요
    - 각 개발팀에 맞는 최적의 개발 프로세스를 지속적으로 향상시킬 수 있음

## 4.1 도메인 주도 설계와 마이크로서비스
- DDD(도메인 주도 설계)
    - 마이크로서비스의 애플리케이션 개발 측면, 응집성이 있는 도메인 중심의 마이크로서비스를 도출하는 지침 및 마이크로서비스 내부의 비지니스 로직 설계의 주요한 가이드로 사용되고 있다
    - 전략적 설계(strategic design)
        - 도메인 전문가 및 기술팀이 함께 모여 유비쿼터스 언어를 통해 도메인 지식을 공유 및 이해하고 이를 기준으로 개념과 경계를 식별해 바운디드 컨텍스트(bounded context)로 정의하고 경계의 관계를 컨텍스트 맵(context map)으로 정희하는 활동
    - 전술적 설계(tactical design)

## 4.2 기민한 설계/개발 프로세스

- 애자일한 마이크로서비스 설계/개발 절차
    
    ![[Untitled 50.png]]

### 4.2.1 점진/반복적인 스크럼 생명주기

- 기본 생명주기는 스크럼의 스프린트를 활용
- 스프린트는 스크럼의 점진, 반복적인 생명주기이며, 1~4주 동안 실행
- backlog라는 일감 목록을 기반으로 각 스프린트에 일감이 배분되어 진행되며, 매 스프린트마다 실제로 동작하는 소프트웨어를 시연하고 피드백을 얻는다
- 스크럼의 주요 개념 및 공정
    - 스크럼 팀
        - 스프린트가 진행되는 팀
        - 스크럼 마스터와 팀 멤버로 구성
        - 프론트엔드, 백엔드, 설계자, 테스터, 비지니스 전문가, 디자이너 등이 한 팀으로 구성
        - 스크럼 마스터는 협업을 촉진하고 팀의 장애물을 제거하는 역할
    - 스크럼 미팅
        - 매일 아침 각자의 자리에서 짧게 진행되는 스탠드업 미팅을 통해 각자의 일을 투명하게 공유
    - 스프린트 계획 수립
        - 시스템의 모든 요구사항은 제품 백로그에 담기고 일정에 맞게 스프린트를 몇 번 수행할 것인가를 결정
        - 스프린트 횟수가 결정되면 제품 백로그에 담긴 백로그를 각 스프린트에 적절히 분배
        - 스프린트가 종료되면 백로그완료 일감을 기준으로 팀의 생산성이 결정
        - 속도가 매우 중요 ⇒ 이 속도에 맞춰 팀의 다음 스프린트 계획이 세워짐 ⇒ 이 과정을 지속적인 계획(continuous planning)이라 하며, 적응적(adaptive) 계획
    - 고정된 계획 vs 지속적 계획
        
        ![[Untitled 51.png]]
        
    - 시연 & 회고
        - 스프린트 마지막 활등은 시연과 회고
        - 시연은 초기에 정의한 백로그가 모두 구현되고 그 요건을 만족하는지 확인하는 자리, 이 때 피드백을 받을 수 있고 다음 스프린트에 반영할 요건들을 확인
        - 회고는 팀원들이 자기 스스로를 돌아보는 과정, 마이크로서비스를 설계 및 개발하는 과정에서 좋았던 방식과 안 좋았던 방식을 논의하고 개선점을 찾아 다음 스프린트에 적용

### 4.2.2 아키텍처 정의와 마이크로서비스 도출

- 아키텍처 정의
    - 마이크로서비스 외부/내부 아키텍처를 정의하는 공정
    - 유연성을 유지함과 동시에 최소한의 개발 및 테스트 환경을 먼저 준비하는 것이 스프린트 진행에 효과적
- 마이크로서비스 도출
    - 본격적인 마이크로서비스 개발로 들어가기 위한 스크럼 팀이 개발할 전체 마이크로서비스들을 파악하는 작업
    - 모든 마이크로서비스를 하나의 스크럼 팀이 개발할 수 없으므로, DDD의 전략적 설계 기법을 활용해 마이크로서비스를 도출하고 그것들 간의 대략적인 매핑 관계를 정의한 후 마이크로서비스 개발 우선순위에 근거해 스크럼 팀에 배분해서 스프린트 진행
    - 최종 결과물은 컨텍스트 맵 - 식별된 마이크로서비스와 그것들 간의 의존관계

### 4.2.3 스프린트 내 개발 공정

- 백엔드 설계 및 개발 순서
    1. API 설계
        1. API 설계는 각 백엔드 마이크로서비스가 프론트엔드에 제공할 서비스 명세
        2. 초기에 API 설계를 진행해 프론트엔드 영역과 협의 및 조정해야함
    2. 도메인 모델과 데이터 모델 설계
        1. 도메인 모델링(도메인 모델을 작성하는 활동)
        2. OOAD(Object Oriented Analysis Desing)과는 다른 방식
            1. OOAD는 UML 등을 활용해 설계 모델을 작성하고, 이를 소스코드로 변환하는 작업 등을 진행
        3. DDD 적용
            1. 별도의 정형화된 모델을 만들지 않음
            2. 단순한 도구로 작성해 공유 후 곧바로 소스코드로 도메인 모델을 개발
        4. MDD(Model Driven Development)와 DDD의 모델
            
            ![[Untitled 52.png]]
            
- 프론트엔드 영역 설계와 개발
    - UI 레이아웃을 정의하고 백엔드의 API를 호출해 API가 보내준 데이터를 기반으로 UI에 어떻게 표현할 것인가를 정의하는 활동
    - 프론트엔드 영역 설계와 개발의 활동
        - UI 흐름 정의
            - 비지니스 흐름에 따른 UI 흐름을 정의. “UI 스토리보드”
        - UI 레이아웃 정의
            - 사용자 접점인 사용자 인터페이스를 정의하는 활동
            - 디자인을 고려하지 않은 사용자 경험을 고려해서 설계
        - UI 이벤트 및 액션 정의
            - UI 레이아웃의 구성요소인 컨트롤을 클릭하거나 터치 등의 행위를 했을 때 발생하는 이벤트 및 액션을 정의하는 활동. 미리 정의된 백엔드 API와의 연계를 정의할 수도 있다
        - UI 개발
            - UI 레이아웃 및 이벤트의 의도에 맞춰 프론트엔드 애플리케이션을 개발하는 활동
- 빌드 및 배포
    - 소스코드 리포지터리 구성
        - Git, SVN 등
    - 통합 빌드 잡(Build Job) 구성
        - 리포지터리에 존재하는 소스코드를 통합한 후 컴파일 및 테스트해서 바이너리를 만드는 활동을 자동화
        - Jenkins
    - 컨테이너 생성 파일 작성
        - 배포 환경을 컨테이널 환경으로 구성할 경우 운영체제와 WAS 와 빌드된 애플리케이션을 묶어서 컨테이너 이미지를 생성하는 스크립트를 작성할 수 있다
        - Dockerfile
    - 배포 스크립트 작성
        - 자동으로 배포하는 스크립트를 작성하는 활동
        - 배포 Target에 맞춰 스크립트 작성